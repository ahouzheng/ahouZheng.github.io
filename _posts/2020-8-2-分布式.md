---
title: 分布式
auther: ahou
layout: post
description: 分布式相关知识
categories: general
---


## 分布式事务

**参考文章：[TCC介绍](https://www.cnblogs.com/jajian/p/10014145.html)**  

#### 介绍
分布式事务是指一个任务分解到多个节点上执行，如何保证它的提交与回滚操作，使它具有ACID的事务属性

#### 两阶段提交协议2PC

#### TCC
**参考文章：[TCC举例详细介绍](https://www.cnblogs.com/jajian/p/10014145.html)**  

TCC分布式事务的执行分为三个阶段：
- **Try** 尝试执行事务，预留需要的资源  
    比如商品库存扣减中，添加一个预扣减字段，try阶段写该字段，如果写入成功，表明资源访问正常，
有理由相信真正的扣减操作也是大概率成功的
- **confirm** 当try阶段全部执行成功后，执行该操作，进行实际的业务操作  
    此时进行真正的业务操作，从商品库存中减去预扣减的值，将预扣减置零  
- **cancel** 当try阶段执行出错时，cancel之前的操作，将预留的资源释放掉  
    将预扣减的字段置零